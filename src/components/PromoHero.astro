---
export interface PromoOption {
  name: string;
  description?: string;
  price: number;
}

export interface PromoHeroProps {
  image: string;
  icon?: any;
  title: string;
  subtitle?: string;
  description?: string;
  price?: number;
  options?: PromoOption[];
}

const {
  image,
  icon,
  title,
  subtitle,
  description,
  price,
  options = [],
} = Astro.props;
---

<div
  class="w-full bg-background rounded-b-lg overflow-hidden"
>
  <!-- Imagen hero -->
  {
    image && (
      <img
        src={image}
        alt={title}
        class="w-full h-40 object-cover"
      />
    )
  }
  <!-- Zigzag superior -->
  <div class="h-3 w-full overflow-hidden -mt-1">
    <svg
      viewBox="0 0 100 6"
      width="100%"
      height="100%"
      preserveAspectRatio="none"
      class="block"
    >
      <polygon
        points="0,6 2,0 4,6 6,0 8,6 10,0 12,6 14,0 16,6 18,0 20,6 22,0 24,6 26,0 28,6 30,0 32,6 34,0 36,6 38,0 40,6 42,0 44,6 46,0 48,6 50,0 52,6 54,0 56,6 58,0 60,6 62,0 64,6 66,0 68,6 70,0 72,6 74,0 76,6 78,0 80,6 82,0 84,6 86,0 88,6 90,0 92,6 94,0 96,6 98,0 100,6"
        fill="var(--color-primary)"></polygon>
    </svg>
  </div>
  <!-- Icono y tÃ­tulo -->
  <div class="flex flex-col items-center py-4">
    {icon && <span class="mb-2">{icon}</span>}
    <h1
      class="text-2xl font-bold text-text text-center font-serif"
    >
      {title}
    </h1>
    {
      subtitle && (
        <span class="inline-block mt-2 px-4 py-1 bg-primary-light text-accent rounded-full text-sm font-semibold">
          {subtitle}
        </span>
      )
    }
    {
      description && (
        <p class="text-muted text-center mt-2">
          {description}
        </p>
      )
    }
    {
      price && options.length === 0 && (
        <span class="block mt-2 text-xl font-bold text-primary">
          ${price.toLocaleString("es-CL")}
        </span>
      )
    }
  </div>
  {
    options.length > 0 && (
      <ul class="divide-y divide-dotted divide-border">
        {options.map((opt: PromoOption) => (
          <li class="flex justify-between py-4">
            <div>
              <span class="font-bold">{opt.name}</span>
              {opt.description && (
                <p class="text-muted text-xs">
                  {opt.description}
                </p>
              )}
            </div>
            <span class="font-bold">
              ${opt.price.toLocaleString("es-CL")}
            </span>
          </li>
        ))}
      </ul>
    )
  }
  <!-- Zigzag inferior -->
  <div class="h-3 w-full overflow-hidden rotate-180">
    <svg
      viewBox="0 0 100 6"
      width="100%"
      height="100%"
      preserveAspectRatio="none"
      class="block"
    >
      <polygon
        points="0,6 2,0 4,6 6,0 8,6 10,0 12,6 14,0 16,6 18,0 20,6 22,0 24,6 26,0 28,6 30,0 32,6 34,0 36,6 38,0 40,6 42,0 44,6 46,0 48,6 50,0 52,6 54,0 56,6 58,0 60,6 62,0 64,6 66,0 68,6 70,0 72,6 74,0 76,6 78,0 80,6 82,0 84,6 86,0 88,6 90,0 92,6 94,0 96,6 98,0 100,6"
        fill="var(--color-primary)"></polygon>
    </svg>
  </div>
</div>
